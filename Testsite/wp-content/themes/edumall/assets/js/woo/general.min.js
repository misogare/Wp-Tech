!function(r){"use strict";r.fn.serializeArrayAll=function(){var n=/\r?\n/g;return this.map(function(){return this.elements?jQuery.makeArray(this.elements):this}).map(function(t,e){var a=jQuery(this).val();return null==a||("checkbox"==this.type&&0==this.checked?{name:this.name,value:this.checked?this.value:""}:jQuery.isArray(a)?jQuery.map(a,function(t,a){return{name:e.name,value:t.replace(n,"\r\n")}}):{name:e.name,value:a.replace(n,"\r\n")})}).get()};var i=r("body");function o(t,a){a.removeClass("loading"),r.magnificPopup.open({mainClass:"mfp-fade popup-product-quick-view",items:{src:t.html(),type:"inline"},callbacks:{open:function(){var t=this.content.find(".woo-single-gallery"),a=t.children(".edumall-thumbs-swiper").EdumallSwiper();t.children(".edumall-main-swiper").EdumallSwiper({thumbs:{swiper:a}});this.content.find(".entry-summary .inner-content").perfectScrollbar({suppressScrollX:!0})}}})}r(document).ready(function(){var n;r(".edumall-product").on("click",".quick-view-btn",function(t){t.preventDefault(),t.stopPropagation();var a=r(this);a.parents(".product-actions").first().addClass("refresh"),a.addClass("loading");var t=a.data("pid"),e=i.children("#popup-product-quick-view-content-"+t);0<e.length?o(e,a):(t={action:"product_quick_view",pid:t},r.ajax({url:$edumall.ajaxurl,type:"POST",data:r.param(t),dataType:"json",success:function(t){e=r(t.template),i.append(e),o(e,a)}}))}),n=[],i.on("click",".ajax_add_to_cart",function(){var t=r(this).parents(".cart-notification").first().data("notification"),a='<span class="added-text">'+$edumall.noticeAddedCartText+"</span>",e=a;void 0!==t&&(e='<div class="product-added-cart">',""!==t.image&&(e+='<div class="product-thumbnail"><img src="'+t.image+'" alt="'+t.title+'"/></div>'),e+='<div class="product-caption"><h3 class="product-title">'+t.title+" </h3>"+a+"</div>",e+="</div>"),e+='<div class="tm-button-wrapper btn-view-cart"><a href="'+$edumall.noticeCartUrl+'" class="tm-button button-grey style-flat tm-button-xs tm-button-full-wide">'+$edumall.noticeCartText+"</a></div>",n.push(e)}),i.on("added_to_cart",function(){for(var t=0;t<n.length;t++){var a=n[t];r.growl({location:"br",duration:5e3,title:"",message:a}),n.splice(t,1)}}),r(document).on("click",".single_add_to_cart_button:not(.disabled)",function(t){var e=r(this),n=e.closest("form.cart"),a=n.find('input:not([name="product_id"]), select, button, textarea').serializeArrayAll()||0;return r.each(a,function(t,a){"add-to-cart"==a.name&&(a.name="product_id",a.value=n.find("input[name=variation_id]").val()||e.val())}),t.preventDefault(),r(document.body).trigger("adding_to_cart",[e,a]),r.ajax({type:"POST",url:woocommerce_params.wc_ajax_url.toString().replace("%%endpoint%%","add_to_cart"),data:a,beforeSend:function(t){e.removeClass("added").addClass("loading updating-icon")},complete:function(t){e.addClass("added").removeClass("loading updating-icon")},success:function(t){t.error&t.product_url?window.location=t.product_url:r(document.body).trigger("added_to_cart",[t.fragments,t.cart_hash,e])}}),!1})})}(jQuery);