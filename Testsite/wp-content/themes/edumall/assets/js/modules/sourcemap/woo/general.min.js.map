{"version":3,"sources":["general.js"],"names":["$","fn","serializeArrayAll","rCRLF","this","map","elements","jQuery","makeArray","i","elem","val","type","checked","name","value","isArray","replace","get","$body","openQuickViewPopup","$popup","$button","removeClass","magnificPopup","open","mainClass","items","src","html","callbacks","$sliderWrap","content","find","thumbsSlider","children","EdumallSwiper","thumbs","swiper","perfectScrollbar","suppressScrollX","document","ready","edumallNotices","on","e","preventDefault","stopPropagation","parents","first","addClass","productID","data","length","action","pid","ajax","url","$edumall","ajaxurl","param","dataType","success","results","template","append","settings","addedText","noticeAddedCartText","messages","undefined","image","title","noticeCartUrl","noticeCartText","push","growl","location","duration","message","splice","$thisbutton","$form","closest","each","item","body","trigger","woocommerce_params","wc_ajax_url","toString","beforeSend","response","complete","error","product_url","window","fragments","cart_hash"],"mappings":"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","file":"../../../woo/general.min.js","sourcesContent":["(\n\tfunction( $ ) {\n\t\t'use strict';\n\n\t\t$.fn.serializeArrayAll = function() {\n\t\t\tvar rCRLF = /\\r?\\n/g;\n\t\t\treturn this.map( function() {\n\t\t\t\treturn this.elements ? jQuery.makeArray( this.elements ) : this;\n\t\t\t} ).map( function( i, elem ) {\n\t\t\t\tvar val = jQuery( this ).val();\n\t\t\t\tif ( val == null ) {\n\t\t\t\t\treturn val == null\n\t\t\t\t\t//next 2 lines of code look if it is a checkbox and set the value to blank\n\t\t\t\t\t//if it is unchecked\n\t\t\t\t} else if ( this.type == \"checkbox\" && this.checked == false ) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tname: this.name,\n\t\t\t\t\t\tvalue: this.checked ? this.value : ''\n\t\t\t\t\t}\n\t\t\t\t\t//next lines are kept from default jQuery implementation and\n\t\t\t\t\t//default to all checkboxes = on\n\t\t\t\t} else {\n\t\t\t\t\treturn jQuery.isArray( val ) ?\n\t\t\t\t\t\tjQuery.map( val, function( val, i ) {\n\t\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\t\tname: elem.name,\n\t\t\t\t\t\t\t\tvalue: val.replace( rCRLF, \"\\r\\n\" )\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t} ) :\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tname: elem.name,\n\t\t\t\t\t\t\tvalue: val.replace( rCRLF, \"\\r\\n\" )\n\t\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t} ).get();\n\t\t};\n\n\t\tvar $body = $( 'body' );\n\n\t\t$( document ).ready( function() {\n\t\t\tinitQuickViewPopup();\n\t\t\taddToCartNotification();\n\t\t\tsingleProductAddToCart();\n\t\t} );\n\n\t\tfunction initQuickViewPopup() {\n\t\t\t$( '.edumall-product' ).on( 'click', '.quick-view-btn', function( e ) {\n\t\t\t\te.preventDefault();\n\t\t\t\te.stopPropagation();\n\n\t\t\t\tvar $button = $( this );\n\n\t\t\t\tvar $actions = $button.parents( '.product-actions' ).first();\n\t\t\t\t$actions.addClass( 'refresh' );\n\n\t\t\t\t$button.addClass( 'loading' );\n\t\t\t\tvar productID = $button.data( 'pid' );\n\n\t\t\t\t/**\n\t\t\t\t * Avoid duplicate ajax request.\n\t\t\t\t */\n\t\t\t\tvar $popup = $body.children( '#' + 'popup-product-quick-view-content-' + productID );\n\t\t\t\tif ( $popup.length > 0 ) {\n\t\t\t\t\topenQuickViewPopup( $popup, $button );\n\t\t\t\t} else {\n\t\t\t\t\tvar data = {\n\t\t\t\t\t\taction: 'product_quick_view',\n\t\t\t\t\t\tpid: productID\n\t\t\t\t\t};\n\n\t\t\t\t\t$.ajax( {\n\t\t\t\t\t\turl: $edumall.ajaxurl,\n\t\t\t\t\t\ttype: 'POST',\n\t\t\t\t\t\tdata: $.param( data ),\n\t\t\t\t\t\tdataType: 'json',\n\t\t\t\t\t\tsuccess: function( results ) {\n\t\t\t\t\t\t\t$popup = $( results.template );\n\t\t\t\t\t\t\t$body.append( $popup );\n\t\t\t\t\t\t\topenQuickViewPopup( $popup, $button );\n\t\t\t\t\t\t},\n\t\t\t\t\t} );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction openQuickViewPopup( $popup, $button ) {\n\t\t\t$button.removeClass( 'loading' );\n\n\t\t\t$.magnificPopup.open( {\n\t\t\t\tmainClass: 'mfp-fade popup-product-quick-view',\n\t\t\t\titems: {\n\t\t\t\t\tsrc: $popup.html(),\n\t\t\t\t\ttype: 'inline'\n\t\t\t\t},\n\t\t\t\tcallbacks: {\n\t\t\t\t\topen: function() {\n\t\t\t\t\t\tvar $sliderWrap = this.content.find( '.woo-single-gallery' );\n\t\t\t\t\t\tvar thumbsSlider = $sliderWrap.children( '.edumall-thumbs-swiper' ).EdumallSwiper();\n\t\t\t\t\t\tvar mainSlider = $sliderWrap.children( '.edumall-main-swiper' ).EdumallSwiper( {\n\t\t\t\t\t\t\tthumbs: {\n\t\t\t\t\t\t\t\tswiper: thumbsSlider\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} );\n\n\t\t\t\t\t\tthis.content.find( '.entry-summary .inner-content' ).perfectScrollbar( {\n\t\t\t\t\t\t\tsuppressScrollX: true\n\t\t\t\t\t\t} );\n\t\t\t\t\t},\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction addToCartNotification() {\n\t\t\tvar edumallNotices = [];\n\n\t\t\t$body.on( 'click', '.ajax_add_to_cart', function() {\n\t\t\t\tvar $addedProduct = $( this ).parents( '.cart-notification' ).first();\n\t\t\t\tvar settings = $addedProduct.data( 'notification' );\n\n\t\t\t\tvar addedText = '<span class=\"added-text\">' + $edumall.noticeAddedCartText + '</span>';\n\t\t\t\tvar messages = addedText;\n\n\t\t\t\tif ( settings !== undefined ) {\n\t\t\t\t\tmessages = '<div class=\"product-added-cart\">';\n\t\t\t\t\tif ( '' !== settings.image ) {\n\t\t\t\t\t\tmessages += '<div class=\"product-thumbnail\"><img src=\"' + settings.image + '\" alt=\"' + settings.title + '\"/></div>'\n\t\t\t\t\t}\n\t\t\t\t\tmessages += '<div class=\"product-caption\"><h3 class=\"product-title\">' + settings.title + ' </h3>' + addedText + '</div>';\n\t\t\t\t\tmessages += '</div>'\n\t\t\t\t}\n\n\t\t\t\tmessages += '<div class=\"tm-button-wrapper btn-view-cart\"><a href=\"' + $edumall.noticeCartUrl + '\" class=\"tm-button button-grey style-flat tm-button-xs tm-button-full-wide\">' + $edumall.noticeCartText + '</a></div>';\n\n\t\t\t\tedumallNotices.push( messages );\n\t\t\t} );\n\n\t\t\t$body.on( 'added_to_cart', function() {\n\t\t\t\tfor ( var i = 0; i < edumallNotices.length; i ++ ) {\n\t\t\t\t\tvar messages = edumallNotices[ i ];\n\n\t\t\t\t\t$.growl( {\n\t\t\t\t\t\tlocation: 'br',\n\t\t\t\t\t\tduration: 5000,\n\t\t\t\t\t\ttitle: '',\n\t\t\t\t\t\tmessage: messages,\n\t\t\t\t\t} );\n\n\t\t\t\t\tedumallNotices.splice( i, 1 );\n\t\t\t\t}\n\t\t\t} );\n\t\t}\n\n\t\tfunction singleProductAddToCart() {\n\t\t\t$( document ).on( 'click', '.single_add_to_cart_button:not(.disabled)', function( e ) {\n\n\t\t\t\tvar $thisbutton = $( this ),\n\t\t\t\t    $form       = $thisbutton.closest( 'form.cart' ),\n\t\t\t\t    //quantity = $form.find('input[name=quantity]').val() || 1,\n\t\t\t\t    //product_id = $form.find('input[name=variation_id]').val() || $thisbutton.val(),\n\t\t\t\t    data        = $form.find( 'input:not([name=\"product_id\"]), select, button, textarea' ).serializeArrayAll() || 0;\n\n\t\t\t\t$.each( data, function( i, item ) {\n\t\t\t\t\tif ( item.name == 'add-to-cart' ) {\n\t\t\t\t\t\titem.name = 'product_id';\n\t\t\t\t\t\titem.value = $form.find( 'input[name=variation_id]' ).val() || $thisbutton.val();\n\t\t\t\t\t}\n\t\t\t\t} );\n\n\t\t\t\te.preventDefault();\n\n\t\t\t\t$( document.body ).trigger( 'adding_to_cart', [ $thisbutton, data ] );\n\n\t\t\t\t$.ajax( {\n\t\t\t\t\ttype: 'POST',\n\t\t\t\t\turl: woocommerce_params.wc_ajax_url.toString().replace( '%%endpoint%%', 'add_to_cart' ),\n\t\t\t\t\tdata: data,\n\t\t\t\t\tbeforeSend: function( response ) {\n\t\t\t\t\t\t$thisbutton.removeClass( 'added' ).addClass( 'loading updating-icon' );\n\t\t\t\t\t},\n\t\t\t\t\tcomplete: function( response ) {\n\t\t\t\t\t\t$thisbutton.addClass( 'added' ).removeClass( 'loading updating-icon' );\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: function( response ) {\n\t\t\t\t\t\tif ( response.error & response.product_url ) {\n\t\t\t\t\t\t\twindow.location = response.product_url;\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$( document.body ).trigger( 'added_to_cart', [\n\t\t\t\t\t\t\tresponse.fragments,\n\t\t\t\t\t\t\tresponse.cart_hash,\n\t\t\t\t\t\t\t$thisbutton\n\t\t\t\t\t\t] );\n\t\t\t\t\t},\n\t\t\t\t} );\n\n\t\t\t\treturn false;\n\n\t\t\t} );\n\t\t}\n\t}( jQuery )\n);\n"]}